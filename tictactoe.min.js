!function(){function r(){q.pause(),J.hide(),ar.hide(),$(".played-by-o").removeClass("played-by-o").text(""),$(".played-by-x").removeClass("played-by-x").text(""),dr=!1,$r=m(),m()||ur||u(!0)}function i(){H=$(this).text(),$("#playerTwoName").append("CPU("+H+")"),K.hide(),$("#playerOneName").text(L),ir.show(),er.show(),$r=m(),m()||u(!0)}function n(){$(this).hide(),B.hide(),R.show()}function e(){$(this).hide(),z.hide(),S.show()}function a(){L=W.val()||"Anonymous",R.hide(),K.show()}function t(){V=Y.val()||"Player One",j=Z.val()||"Player Two",S.hide(),$("#playerOneName").text(V),$("#playerTwoName").text(j),ur=!0,ir.show(),er.show()}function o(r){var i={width:$(window).width(),height:$(window).height()},n=parseFloat(ar.css("top"))||0,e=parseFloat(ar.css("left"))||0,a=0===window.orientation?r.beta:r.gamma,t=0===window.orientation?r.gamma:r.beta,o=90!==window.orientation?yr>a:a>yr,d=-90!==window.orientation&&270!==window.orientation?fr>t:t>fr;n=o?n>=cr-i.height?n-10:n:n+cr>=i.height?i.height-cr:n+10,e=d?e>=cr-i.width?e-10:e:e+cr>=i.width?i.width-cr:e+10,ar.css({top:n+"px"}),ar.css({left:e+"px"})}function d(r){dr=!0,q=new Audio("sound/endgame.mp3"),q.play(),ar.css({top:0,left:0}),tr.attr("src",r),ar.fadeIn(lr),J.show(),or="none",setTimeout(function(){window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",o,!1)},lr)}function s(){if(dr)return this;var r=$(this);return r.hasClass("played-by-x")||r.hasClass("played-by-o")?r:($r?($(this).addClass("played-by-o"),$(this).text("O")):($(this).addClass("played-by-x"),$(this).text("X")),C(!0,$r),x()&&!dr?(d("images/draw.png"),this):(dr||ur?ur&&($r=!$r,C(!1,$r)):(u(!1),C(!1,!$r)),x()&&!dr?(d("images/draw.png"),this):void 0))}function u(r){switch(H){case"Easy":return void y();case"Normal":return void c(r);case"Hard":sr=!0;case"Impossible":return void l(r);default:alert("This should not happen!")}}function f(r){$r?(r.addClass("played-by-x"),r.text("X")):(r.addClass("played-by-o"),r.text("O"))}function y(){for(;;){var r=$("#"+b());if(!r.hasClass("played-by-x")&&!r.hasClass("played-by-o")){f(r);break}}}function c(r){m()?y():l(r)}function l(r){if(T())return f($("#"+G)),this;if(I())return f($("#"+U)),this;if(E())return f($("#"+D)),this;if(r)switch(b()%3){case 0:or="Corner";break;case 1:or="Edge";break;case 2:or="Middle"}var i=$r?$($(".played-by-o")).attr("id"):$($(".played-by-x")).attr("id");"none"==or&&(or=g(i));var n=P().length;switch(or){case"Edge":w(n);break;case"Corner":p(n);break;case"Middle":A(n)}}function h(r,i,n,e){switch(b()%4){case 0:return void f($("#"+r));case 1:return void f($("#"+i));case 2:return void f($("#"+n));case 3:return void f($("#"+e))}}function v(r){var i=$("#"+r);return i.hasClass("played-by-o")||i.hasClass("played-by-x")}function A(r){if(0===r)f($("#5"));else{var i=P(),n=F();if(1===r){if(1!=n.length)return X(["1","9"],n)||X(["3","7"],n)?void h(2,4,6,8):void y();switch(n[0]){case"1":return void f($("#9"));case"3":return void f($("#7"));case"7":return void f($("#3"));case"9":return void f($("#1"));default:return void h(1,3,7,9)}}if(2===r){if(-1!==$.inArray("1",i)){if($.inArray("2",n)&&!v(7))return void f($("#7"));if($.inArray("4",n)&&!v(3))return void f($("#3"))}if(-1!==$.inArray("3",i)&&!v(1)){if($.inArray("2",n)&&!v(9))return void f($("#9"));if($.inArray("6",n)&&!v(1))return void f($("#1"))}if(-1!==$.inArray("7",i)&&!v(9)){if($.inArray("8",n)&&!v(1))return void f($("#1"));if($.inArray("4",n)&&!v(9))return void f($("#9"))}if(-1!==$.inArray("9",i)&&!v(7)){if($.inArray("6",n)&&!v(7))return void f($("#7"));if($.inArray("8",n)&&!v(3))return void f($("#3"))}}y()}}function p(r){if(0===r){var i=F();if(0===i.length||sr||-1!==$.inArray("5",i))return void h(1,3,7,9);if(-1!==$.inArray("2",i))return N(1,5,3),this;if(-1!==$.inArray("4",i))return N(1,5,7),this;if(-1!==$.inArray("6",i))return N(3,5,9),this;if(-1!==$.inArray("8",i))return N(7,5,9),this}else{var n=P();if(1===r){if(-1===$.inArray("5",n)&&!v(5))return void f($("#5"));if(-1!==$.inArray("1",n)&&!v(9))return void f($("#9"));if(-1!==$.inArray("3",n)&&!v(7))return void f($("#7"));if(-1!==$.inArray("7",n)&&!v(3))return void f($("#3"));if(-1!==$.inArray("9",n)&&!v(1))return void f($("#1"))}if(2===r){if(X(["1","9"],n)){if(m()&&!v(7))return void f($("#7"));if(!v(3))return void f($("#3"))}if(X(["3","7"],n)){if(m()&&!v(1))return void f($("#1"));if(!v(9))return void f($("#9"))}}y()}}function w(r){if(0===r)return void h(2,4,6,8);var i=P(),n=F();if(1===r){if(-1===$.inArray("5",i)&&!v(5))return void f($("#5"));if(-1!==$.inArray("2",i)||-1!==$.inArray("8",i)){if(m()&&!v(4))return void f($("#4"));if(!v(6))return void f($("#6"))}else{if(m()&&!v(2))return void f($("#2"));if(!v(8))return void f($("#8"))}}if(2===r){if(-1!==$.inArray("2",i)){if(-1!==$.inArray("4",i)&&!v(1))return void f($("#1"));if(!v(3)&&sr)return void f($("#3"));if(X(["1","8"],n)||X(["3","8"],n))return void h(4,6,7,9)}if(-1!==$.inArray("4",i)){if(-1!==$.inArray("8",i)&&!v(7))return void f($("#7"));if(!v(1)&&sr)return void f($("#1"));if(X(["7","6"],n)||X(["1","6"],n))return void h(2,3,8,9)}if(-1!==$.inArray("6",i)){if(-1!==$.inArray("8",i)&&!v(9))return void f($("#9"));if(!v(3)&&sr)return void f($("#3"));if(X(["4","3"],n)||X(["4","9"],n))return void h(1,2,7,8)}if(-1!==$.inArray("8",i)){if(-1!==$.inArray("4",i)&&!v(7))return void f($("#7"));if(!v(9)&&sr)return void f($("#9"));if(X(["2","7"],n)||X(["2","9"],n))return void h(1,3,4,6)}}y()}function g(r){switch(parseInt(r)){case 5:return"Corner";case 1:case 3:case 7:case 9:return"Middle";case 2:case 4:case 6:case 8:return m()?"Middle":"Corner";default:return alert("This should not happen while choosing strategy!"),"Middle"}}function m(){return parseInt(100*Math.random())%2==1?!0:!1}function b(){return parseInt(100*Math.random())%9+1}function x(){return $(".played-by-o").length+$(".played-by-x").length==9}function C(r,i){var n;if(n=i?$(".played-by-o"):$(".played-by-x"),n.length<3)return this;for(var e=[],a=0;a<n.length;a++){var t=$(n[a]);e.push(t.attr("id"))}(k(e)||O(e)||M(e))&&d(ur?i?"images/winO.png":"images/winX.png":r?"images/win.png":"images/lose.png")}function k(r){return-1!==$.inArray("1",r)&&-1!==$.inArray("2",r)&&-1!==$.inArray("3",r)?!0:-1!==$.inArray("4",r)&&-1!==$.inArray("5",r)&&-1!==$.inArray("6",r)?!0:-1!==$.inArray("7",r)&&-1!==$.inArray("8",r)&&-1!==$.inArray("9",r)?!0:!1}function O(r){return-1!==$.inArray("1",r)&&-1!==$.inArray("4",r)&&-1!==$.inArray("7",r)?!0:-1!==$.inArray("2",r)&&-1!==$.inArray("5",r)&&-1!==$.inArray("8",r)?!0:-1!==$.inArray("3",r)&&-1!==$.inArray("6",r)&&-1!==$.inArray("9",r)?!0:!1}function M(r){return-1!==$.inArray("1",r)&&-1!==$.inArray("5",r)&&-1!==$.inArray("9",r)?!0:-1!==$.inArray("7",r)&&-1!==$.inArray("5",r)&&-1!==$.inArray("3",r)?!0:!1}function T(){var r=P();return(X(["2","3"],r)||X(["5","9"],r)||X(["4","7"],r))&&!v(1)?(G=1,!0):!X(["1","3"],r)&&!X(["5","8"],r)||v(2)?(X(["1","2"],r)||X(["5","7"],r)||X(["6","9"],r))&&!v(3)?(G=3,!0):!X(["5","6"],r)&&!X(["1","7"],r)||v(4)?(X(["1","9"],r)||X(["3","7"],r)||X(["4","6"],r)||X(["2","8"],r))&&!v(5)?(G=5,!0):!X(["4","5"],r)&&!X(["3","9"],r)||v(6)?(X(["1","4"],r)||X(["3","5"],r)||X(["8","9"],r))&&!v(7)?(G=7,!0):!X(["2","5"],r)&&!X(["7","9"],r)||v(8)?(X(["7","8"],r)||X(["3","6"],r)||X(["1","5"],r))&&!v(9)?(G=9,!0):!1:(G=8,!0):(G=6,!0):(G=4,!0):(G=2,!0)}function E(){var r=F(),i=P();if(2===r.length)if(X(["1","5"],r)||X(["5","9"],r)){if(m()&&!v(7))return D=7,!0;if(!v(3))return D=3,!0}else if(X(["5","7"],r)||X(["3","5"],r)){if(m()&&!v(1))return D=1,!0;if(!v(9))return D=9,!0}else if(1===i.length&&-1!==$.inArray("5",i)){if(X(["2","7"],r)||X(["2","4"],r)||X(["3","4"],r))return D=1,!0;if(X(["2","9"],r)||X(["2","6"],r)||X(["1","6"],r))return D=3,!0;if(X(["1","8"],r)||X(["4","8"],r)||X(["4","9"],r))return D=7,!0;if(X(["3","8"],r)||X(["6","8"],r)||X(["6","7"],r))return D=9,!0}return!1}function I(){var r=F(),i=P();return U=U||0,(X(["2","3"],r)||X(["5","9"],r)||X(["4","7"],r))&&-1===$.inArray("1",i)?(U=1,!0):(X(["1","3"],r)||X(["5","8"],r))&&-1===$.inArray("2",i)?(U=2,!0):(X(["1","2"],r)||X(["5","7"],r)||X(["6","9"],r))&&-1===$.inArray("3",i)?(U=3,!0):(X(["5","6"],r)||X(["1","7"],r))&&-1===$.inArray("4",i)?(U=4,!0):(X(["1","9"],r)||X(["3","7"],r)||X(["4","6"],r)||X(["2","8"],r))&&-1===$.inArray("5",i)?(U=5,!0):(X(["4","5"],r)||X(["3","9"],r))&&-1===$.inArray("6",i)?(U=6,!0):(X(["1","4"],r)||X(["3","5"],r)||X(["8","9"],r))&&-1===$.inArray("7",i)?(U=7,!0):(X(["2","5"],r)||X(["7","9"],r))&&-1===$.inArray("8",i)?(U=8,!0):(X(["7","8"],r)||X(["3","6"],r)||X(["1","5"],r))&&-1===$.inArray("9",i)?(U=9,!0):!1}function N(r,i,n){switch(b()%3){case 0:return void f($("#"+r));case 1:return void f($("#"+i));case 2:return void f($("#"+n))}}function F(){var r;r=$r?$(".played-by-o"):$(".played-by-x");for(var i=[],n=0;n<r.length;n++){var e=$(r[n]);i.push(e.attr("id"))}return i}function P(){var r;r=$r?$(".played-by-x"):$(".played-by-o");for(var i=[],n=0;n<r.length;n++){var e=$(r[n]);i.push(e.attr("id"))}return i}function X(r,i){for(var n=0,e=r.length;e>n;n++)if(-1==$.inArray(r[n],i))return!1;return!0}var U,D,G,H,L,V,j,q,z=$("#play"),B=$("#versus"),J=$("#playAgain"),K=$("#difficulty"),Q=$(".difficulty-options"),R=$("#userform"),S=$("#versusform"),W=$("#username"),Y=$("#playerOne"),Z=$("#playerTwo"),_=$("#submitUsername"),rr=$("#submitVersus"),ir=$("#gameField"),nr=$(".game-tile"),er=$("#resetGame"),ar=$("#end-game"),tr=$("#end-game-image"),or="none",$r=!1,dr=!1,sr=!1,ur=!1,fr=0,yr=0,cr=parseFloat(ar.css("width")),lr=1500;ar.hide(),er.hide(),K.hide(),R.hide(),S.hide(),J.hide(),ir.hide(),Q.on("click",i),z.on("click",n),B.on("click",e),_.on("click",a),rr.on("click",t),nr.on("click",s),J.on("click",r),er.click(function(){location.reload()})}();